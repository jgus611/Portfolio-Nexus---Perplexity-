<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Nexus - AI-Powered Portfolio Management</title>
    <link rel="stylesheet" href="style.css">
    <!-- Load Chart.js first -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Load AI engines in order -->
    <script src="ai-chart-enhancer.js" defer></script>
    <script src="advanced-ai-engine.js" defer></script>
    <script src="enterprise-ai-engine.js" defer></script>
    <script src="advanced-reporting-engine.js" defer></script>
    <script src="authentication-manager.js" defer></script>
    <script src="data-manager.js" defer></script>
    <script src="production-manager.js" defer></script>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="login-page">
        <div class="login-container">
            <div class="login-header">
                <h1 class="login-title">Portfolio Nexus</h1>
                <p class="login-subtitle">AI-Powered Portfolio Management</p>
            </div>
            
            <!-- Login Form -->
            <div id="loginFormContainer" class="login-form">
                <h2>Welcome Back</h2>
                <form id="loginForm">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" id="loginEmail" class="form-control" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" id="loginPassword" class="form-control" placeholder="Enter your password" required>
                    </div>
                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="rememberMe"> Remember me
                        </label>
                        <a href="#" id="forgotPasswordLink" class="forgot-link">Forgot Password?</a>
                    </div>
                    <button type="submit" class="btn btn--primary btn--full-width">Sign In</button>
                    <div class="form-divider">
                        <span>Don't have an account?</span>
                        <a href="#" id="showRegisterForm" class="switch-form-link">Sign Up</a>
                    </div>
                </form>
            </div>

            <!-- Registration Form -->
            <div id="registerFormContainer" class="login-form hidden">
                <h2>Create Account</h2>
                <form id="registerForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">First Name</label>
                            <input type="text" id="registerFirstName" class="form-control" placeholder="First name" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Last Name</label>
                            <input type="text" id="registerLastName" class="form-control" placeholder="Last name" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" id="registerEmail" class="form-control" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" id="registerPassword" class="form-control" placeholder="Create a password" required>
                        <div class="password-requirements">
                            <small>Password must contain at least 8 characters, uppercase, lowercase, number, and special character</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Confirm Password</label>
                        <input type="password" id="confirmPassword" class="form-control" placeholder="Confirm your password" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Risk Tolerance</label>
                        <select id="riskTolerance" class="form-control">
                            <option value="conservative">Conservative</option>
                            <option value="moderate" selected>Moderate</option>
                            <option value="aggressive">Aggressive</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="agreeTerms" required> 
                            I agree to the <a href="#" class="terms-link">Terms of Service</a> and <a href="#" class="privacy-link">Privacy Policy</a>
                        </label>
                    </div>
                    <button type="submit" class="btn btn--primary btn--full-width">Create Account</button>
                    <div class="form-divider">
                        <span>Already have an account?</span>
                        <a href="#" id="showLoginForm" class="switch-form-link">Sign In</a>
                    </div>
                </form>
            </div>

            <!-- Password Reset Form -->
            <div id="resetFormContainer" class="login-form hidden">
                <h2>Reset Password</h2>
                <p class="reset-description">Enter your email address and we'll send you a link to reset your password.</p>
                <form id="resetForm">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" id="resetEmail" class="form-control" placeholder="Enter your email" required>
                    </div>
                    <button type="submit" class="btn btn--primary btn--full-width">Send Reset Link</button>
                    <div class="form-divider">
                        <a href="#" id="backToLogin" class="switch-form-link">‚Üê Back to Sign In</a>
                    </div>
                </form>
            </div>

            <!-- Authentication Messages -->
            <div id="authMessages" class="auth-messages hidden">
                <div id="authSuccess" class="message success hidden"></div>
                <div id="authError" class="message error hidden"></div>
                <div id="authInfo" class="message info hidden"></div>
            </div>

            <!-- Loading Indicator -->
            <div id="authLoading" class="loading-indicator hidden">
                <div class="spinner"></div>
                <span>Processing...</span>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="app" class="app hidden">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo-section">
                    <h1 class="app-logo">Portfolio Nexus</h1>
                </div>
                <nav class="main-nav">
                    <button class="nav-btn active" data-view="dashboard">Dashboard</button>
                    <button class="nav-btn" data-view="portfolio">Portfolio</button>
                    <button class="nav-btn" data-view="rebalancing">Rebalancing</button>
                    <button class="nav-btn" data-view="analytics">Analytics</button>
                    <button class="nav-btn" data-view="reports">Reports</button>
                    <button class="nav-btn" data-view="risk">Risk</button>
                    <button class="nav-btn" data-view="esg">ESG</button>
                    <button class="nav-btn" data-view="settings">Settings</button>
                </nav>
                <div class="header-actions">
                    <div class="notification-icon">
                        <span class="notification-badge">3</span>
                        üîî
                    </div>
                    <div class="user-profile">
                        <span class="user-name">Alex Thompson</span>
                        <button class="user-dropdown">‚ñº</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard View -->
            <div id="dashboardView" class="view active">
                <div class="dashboard-grid">
                    <!-- Portfolio Summary -->
                    <div class="portfolio-summary">
                        <div class="summary-card">
                            <h3>Total Portfolio Value</h3>
                            <div class="portfolio-value">$14,041.40</div>
                            <div class="portfolio-change positive">+$127.85 (+0.92%) today</div>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="quick-stats">
                        <div class="stat-card">
                            <div class="stat-label">Total Return</div>
                            <div class="stat-value positive">+$541.90</div>
                            <div class="stat-percent">+4.01%</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Risk Score</div>
                            <div class="stat-value">6.2/10</div>
                            <div class="stat-percent">Moderate</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Rebalancing</div>
                            <div class="stat-value warning">Needed</div>
                            <div class="stat-percent">4 suggestions</div>
                        </div>
                    </div>

                    <!-- Performance Chart -->
                    <div class="chart-container" style="position: relative; height: 300px;">
                        <h3>Portfolio Performance (6 months)</h3>
                        <canvas id="performanceChart"></canvas>
                    </div>

                    <!-- Asset Allocation -->
                    <div class="chart-container" style="position: relative; height: 300px;">
                        <h3>Asset Allocation</h3>
                        <canvas id="allocationChart"></canvas>
                    </div>

                    <!-- AI Insights -->
                    <div class="ai-insights">
                        <h3>ü§ñ AI Insights & Recommendations</h3>
                        <div id="aiInsightsContainer">
                            <!-- AI insights will be populated by JavaScript -->
                        </div>
                        <div class="insight-item">
                            <div class="insight-icon">ü§ñ</div>
                            <div class="insight-content">
                                <div class="insight-title">Rebalancing Recommended</div>
                                <div class="insight-text">Your crypto allocation is 10.4% above target. Consider reducing by $1,462 to optimize risk.</div>
                            </div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-icon">üìà</div>
                            <div class="insight-content">
                                <div class="insight-title">Market Opportunity</div>
                                <div class="insight-text">Bonds are undervalued. Increasing allocation by $632 could enhance stability.</div>
                            </div>
                        </div>
                    </div>

                    <!-- Advanced AI Analytics -->
                    <div class="advanced-ai-analytics">
                        <h3>üß† Advanced AI Analytics</h3>
                        
                        <!-- AI Trading Signals -->
                        <div class="ai-section">
                            <h4>üìä AI Trading Signals</h4>
                            <div id="tradingSignalsContainer" class="signals-grid">
                                <!-- Trading signals will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <!-- ML Price Predictions -->
                        <div class="ai-section">
                            <h4>üîÆ ML Price Predictions</h4>
                            <div id="pricePredictionsContainer" class="predictions-grid">
                                <!-- Price predictions will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <!-- Portfolio Optimization -->
                        <div class="ai-section">
                            <h4>‚öôÔ∏è Portfolio Optimization</h4>
                            <div id="optimizationContainer" class="optimization-panel">
                                <!-- Optimization results will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <!-- Stress Test Results -->
                        <div class="ai-section">
                            <h4>‚ö° Stress Test Analysis</h4>
                            <div id="stressTestContainer" class="stress-test-panel">
                                <!-- Stress test results will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- Recent Transactions -->
                    <div class="recent-transactions">
                        <h3>Recent Transactions</h3>
                        <div class="transaction-list">
                            <div class="transaction-item">
                                <div class="transaction-info">
                                    <span class="transaction-symbol">VTI</span>
                                    <span class="transaction-type">BUY</span>
                                </div>
                                <div class="transaction-details">
                                    <div class="transaction-amount">$534.90</div>
                                    <div class="transaction-date">Sep 28, 2024</div>
                                </div>
                            </div>
                            <div class="transaction-item">
                                <div class="transaction-info">
                                    <span class="transaction-symbol">AAPL</span>
                                    <span class="transaction-type">BUY</span>
                                </div>
                                <div class="transaction-details">
                                    <div class="transaction-amount">$534.75</div>
                                    <div class="transaction-date">Sep 25, 2024</div>
                                </div>
                            </div>
                            <div class="transaction-item">
                                <div class="transaction-info">
                                    <span class="transaction-symbol">BTC</span>
                                    <span class="transaction-type">BUY</span>
                                </div>
                                <div class="transaction-details">
                                    <div class="transaction-amount">$432.50</div>
                                    <div class="transaction-date">Sep 20, 2024</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Portfolio View -->
            <div id="portfolioView" class="view">
                <div class="portfolio-header">
                    <h2>Portfolio Holdings</h2>
                    <div class="portfolio-controls">
                        <input type="text" id="portfolioSearch" class="form-control" placeholder="Search holdings...">
                        <select class="form-control" id="assetFilter">
                            <option value="">All Assets</option>
                            <option value="stock">Stocks</option>
                            <option value="etf">ETFs</option>
                            <option value="bond_etf">Bonds</option>
                            <option value="precious_metals">Precious Metals</option>
                            <option value="crypto">Cryptocurrency</option>
                        </select>
                    </div>
                </div>
                
                <div class="holdings-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Name</th>
                                <th>Type</th>
                                <th>Quantity</th>
                                <th>Current Price</th>
                                <th>Market Value</th>
                                <th>Gain/Loss</th>
                                <th>% Change</th>
                            </tr>
                        </thead>
                        <tbody id="holdingsTableBody">
                            <!-- Holdings will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Rebalancing View -->
            <div id="rebalancingView" class="view">
                <div class="rebalancing-header">
                    <h2>AI Rebalancing Recommendations</h2>
                    <button class="btn btn--primary" id="executeRebalancing">Execute Rebalancing</button>
                </div>

                <div class="rebalancing-grid">
                    <!-- Current vs Target Allocation -->
                    <div class="allocation-comparison">
                        <h3>Current vs Target Allocation</h3>
                        <div class="chart-container" style="position: relative; height: 300px;">
                            <canvas id="rebalancingChart"></canvas>
                        </div>
                    </div>

                    <!-- Rebalancing Suggestions -->
                    <div class="rebalancing-suggestions">
                        <h3>Recommendations</h3>
                        <div class="suggestion-list">
                            <div class="suggestion-item reduce">
                                <div class="suggestion-header">
                                    <span class="suggestion-action">REDUCE</span>
                                    <span class="suggestion-asset">Cryptocurrency</span>
                                </div>
                                <div class="suggestion-details">
                                    <div>Current: 15.4% ‚Üí Target: 5.0%</div>
                                    <div class="suggestion-amount">Reduce by $1,462</div>
                                    <div class="suggestion-impact">Impact: Lower portfolio volatility</div>
                                </div>
                            </div>

                            <div class="suggestion-item reduce">
                                <div class="suggestion-header">
                                    <span class="suggestion-action">REDUCE</span>
                                    <span class="suggestion-asset">ETFs</span>
                                </div>
                                <div class="suggestion-details">
                                    <div>Current: 28.6% ‚Üí Target: 25.0%</div>
                                    <div class="suggestion-amount">Reduce by $506</div>
                                    <div class="suggestion-impact">Impact: Improve diversification balance</div>
                                </div>
                            </div>

                            <div class="suggestion-item increase">
                                <div class="suggestion-header">
                                    <span class="suggestion-action">INCREASE</span>
                                    <span class="suggestion-asset">Bonds</span>
                                </div>
                                <div class="suggestion-details">
                                    <div>Current: 10.5% ‚Üí Target: 15.0%</div>
                                    <div class="suggestion-amount">Increase by $632</div>
                                    <div class="suggestion-impact">Impact: Enhanced portfolio stability</div>
                                </div>
                            </div>

                            <div class="suggestion-item add">
                                <div class="suggestion-header">
                                    <span class="suggestion-action">ADD</span>
                                    <span class="suggestion-asset">Commodities</span>
                                </div>
                                <div class="suggestion-details">
                                    <div>Current: 0.0% ‚Üí Target: 10.0%</div>
                                    <div class="suggestion-amount">Add $1,404</div>
                                    <div class="suggestion-impact">Impact: Inflation hedge and diversification</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics View -->
            <div id="analyticsView" class="view">
                <div class="analytics-header">
                    <h2>Portfolio Analytics</h2>
                    <div class="timeframe-selector">
                        <button class="timeframe-btn" data-period="1W">1W</button>
                        <button class="timeframe-btn active" data-period="1M">1M</button>
                        <button class="timeframe-btn" data-period="3M">3M</button>
                        <button class="timeframe-btn active" data-period="6M">6M</button>
                        <button class="timeframe-btn" data-period="1Y">1Y</button>
                    </div>
                </div>

                <div class="analytics-grid">
                    <!-- Risk Metrics -->
                    <div class="risk-metrics">
                        <h3>Risk Analysis</h3>
                        <div class="metric-item">
                            <label>Portfolio Volatility</label>
                            <div class="metric-value">12.4%</div>
                        </div>
                        <div class="metric-item">
                            <label>Sharpe Ratio</label>
                            <div class="metric-value">1.28</div>
                        </div>
                        <div class="metric-item">
                            <label>Max Drawdown</label>
                            <div class="metric-value negative">-5.8%</div>
                        </div>
                        <div class="metric-item">
                            <label>Beta</label>
                            <div class="metric-value">0.92</div>
                        </div>
                    </div>

                    <!-- Performance Analytics Chart -->
                    <div class="chart-container" style="position: relative; height: 300px;">
                        <h3>Performance Analysis</h3>
                        <canvas id="analyticsChart"></canvas>
                    </div>

                    <!-- Sector Diversification -->
                    <div class="chart-container" style="position: relative; height: 300px;">
                        <h3>Sector Diversification</h3>
                        <canvas id="sectorChart"></canvas>
                    </div>

                    <!-- Correlation Matrix -->
                    <div class="correlation-matrix">
                        <h3>Asset Correlation Matrix</h3>
                        <div class="correlation-grid">
                            <div class="correlation-item">
                                <span>AAPL ‚Üî MSFT</span>
                                <span class="correlation-value positive">0.74</span>
                            </div>
                            <div class="correlation-item">
                                <span>BTC ‚Üî Stocks</span>
                                <span class="correlation-value negative">-0.12</span>
                            </div>
                            <div class="correlation-item">
                                <span>GOLD ‚Üî Bonds</span>
                                <span class="correlation-value">0.31</span>
                            </div>
                            <div class="correlation-item">
                                <span>VTI ‚Üî Market</span>
                                <span class="correlation-value positive">0.89</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports View -->
            <div id="reportsView" class="view">
                <div class="reports-header">
                    <h2>Portfolio Reports</h2>
                    <div class="report-actions">
                        <button class="btn btn--secondary" id="generateReport">Generate Report</button>
                        <button class="btn btn--primary" id="scheduleReports">Schedule Reports</button>
                    </div>
                </div>

                <div class="reports-grid">
                    <!-- Report Types -->
                    <div class="report-types">
                        <h3>Available Reports</h3>
                        <div class="report-list">
                            <div class="report-item" data-report="performance">
                                <div class="report-icon">üìà</div>
                                <div class="report-info">
                                    <div class="report-title">Performance Report</div>
                                    <div class="report-description">Comprehensive portfolio performance analysis</div>
                                </div>
                                <button class="btn btn--small btn--outline">Generate</button>
                            </div>
                            <div class="report-item" data-report="risk">
                                <div class="report-icon">üõ°Ô∏è</div>
                                <div class="report-info">
                                    <div class="report-title">Risk Assessment</div>
                                    <div class="report-description">Detailed risk analysis and recommendations</div>
                                </div>
                                <button class="btn btn--small btn--outline">Generate</button>
                            </div>
                            <div class="report-item" data-report="esg">
                                <div class="report-icon">üå±</div>
                                <div class="report-info">
                                    <div class="report-title">ESG Impact Report</div>
                                    <div class="report-description">Sustainability and impact metrics</div>
                                </div>
                                <button class="btn btn--small btn--outline">Generate</button>
                            </div>
                            <div class="report-item" data-report="tax">
                                <div class="report-icon">üí∞</div>
                                <div class="report-info">
                                    <div class="report-title">Tax Optimization</div>
                                    <div class="report-description">Tax efficiency analysis and strategies</div>
                                </div>
                                <button class="btn btn--small btn--outline">Generate</button>
                            </div>
                            <div class="report-item" data-report="compliance">
                                <div class="report-icon">üìã</div>
                                <div class="report-info">
                                    <div class="report-title">Compliance Report</div>
                                    <div class="report-description">Regulatory compliance overview</div>
                                </div>
                                <button class="btn btn--small btn--outline">Generate</button>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Reports -->
                    <div class="recent-reports">
                        <h3>Recent Reports</h3>
                        <div class="report-history">
                            <div class="history-item">
                                <div class="history-info">
                                    <div class="history-title">Monthly Performance Report</div>
                                    <div class="history-date">September 2024</div>
                                </div>
                                <div class="history-actions">
                                    <button class="btn btn--small btn--ghost">View</button>
                                    <button class="btn btn--small btn--ghost">Download</button>
                                </div>
                            </div>
                            <div class="history-item">
                                <div class="history-info">
                                    <div class="history-title">Quarterly Risk Assessment</div>
                                    <div class="history-date">Q3 2024</div>
                                </div>
                                <div class="history-actions">
                                    <button class="btn btn--small btn--ghost">View</button>
                                    <button class="btn btn--small btn--ghost">Download</button>
                                </div>
                            </div>
                            <div class="history-item">
                                <div class="history-info">
                                    <div class="history-title">ESG Impact Report</div>
                                    <div class="history-date">August 2024</div>
                                </div>
                                <div class="history-actions">
                                    <button class="btn btn--small btn--ghost">View</button>
                                    <button class="btn btn--small btn--ghost">Download</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Report Preview -->
                <div id="reportPreview" class="report-preview hidden">
                    <div class="preview-header">
                        <h3>Report Preview</h3>
                        <button class="btn btn--ghost" id="closePreview">√ó</button>
                    </div>
                    <div id="reportContent" class="report-content">
                        <!-- Dynamic report content will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Risk Management View -->
            <div id="riskView" class="view">
                <div class="risk-header">
                    <h2>Risk Management</h2>
                    <div class="risk-summary">
                        <div class="risk-gauge">
                            <div class="gauge-container">
                                <canvas id="riskGauge" width="200" height="200"></canvas>
                                <div class="gauge-label">Risk Score: 6.2/10</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="risk-grid">
                    <!-- Risk Metrics -->
                    <div class="risk-metrics">
                        <h3>Risk Metrics</h3>
                        <div class="metric-cards">
                            <div class="risk-card">
                                <div class="risk-card-header">
                                    <span class="risk-icon">üìä</span>
                                    <span class="risk-title">Value at Risk (95%)</span>
                                </div>
                                <div class="risk-value">-$265</div>
                                <div class="risk-period">Daily</div>
                            </div>
                            <div class="risk-card">
                                <div class="risk-card-header">
                                    <span class="risk-icon">üìâ</span>
                                    <span class="risk-title">Maximum Drawdown</span>
                                </div>
                                <div class="risk-value">-3.2%</div>
                                <div class="risk-period">Current</div>
                            </div>
                            <div class="risk-card">
                                <div class="risk-card-header">
                                    <span class="risk-icon">‚ö°</span>
                                    <span class="risk-title">Portfolio Beta</span>
                                </div>
                                <div class="risk-value">0.94</div>
                                <div class="risk-period">vs S&P 500</div>
                            </div>
                            <div class="risk-card">
                                <div class="risk-card-header">
                                    <span class="risk-icon">üìà</span>
                                    <span class="risk-title">Sharpe Ratio</span>
                                </div>
                                <div class="risk-value">1.42</div>
                                <div class="risk-period">Risk-Adjusted</div>
                            </div>
                        </div>
                    </div>

                    <!-- Concentration Risk -->
                    <div class="concentration-risk">
                        <h3>Concentration Analysis</h3>
                        <div class="concentration-chart">
                            <canvas id="concentrationChart"></canvas>
                        </div>
                    </div>

                    <!-- Scenario Analysis -->
                    <div class="scenario-analysis">
                        <h3>Stress Testing</h3>
                        <div class="scenario-list">
                            <div class="scenario-item">
                                <div class="scenario-name">Market Crash (-20%)</div>
                                <div class="scenario-impact negative">-18.4%</div>
                                <div class="scenario-recovery">14 months recovery</div>
                            </div>
                            <div class="scenario-item">
                                <div class="scenario-name">Interest Rate Rise (+200bp)</div>
                                <div class="scenario-impact negative">-7.2%</div>
                                <div class="scenario-recovery">8 months recovery</div>
                            </div>
                            <div class="scenario-item">
                                <div class="scenario-name">Inflation Spike (+300bp)</div>
                                <div class="scenario-impact negative">-5.8%</div>
                                <div class="scenario-recovery">6 months recovery</div>
                            </div>
                        </div>
                    </div>

                    <!-- Risk Recommendations -->
                    <div class="risk-recommendations">
                        <h3>Risk Recommendations</h3>
                        <div class="recommendation-list">
                            <div class="recommendation-item high">
                                <div class="rec-priority">HIGH</div>
                                <div class="rec-content">
                                    <div class="rec-title">Reduce Technology Concentration</div>
                                    <div class="rec-description">Technology sector allocation at 22.1% exceeds target of 18%</div>
                                    <div class="rec-action">Consider reducing by $567</div>
                                </div>
                            </div>
                            <div class="recommendation-item medium">
                                <div class="rec-priority">MEDIUM</div>
                                <div class="rec-content">
                                    <div class="rec-title">Add Currency Hedging</div>
                                    <div class="rec-description">EUR exposure at 12.4% without hedging</div>
                                    <div class="rec-action">Consider 50% currency hedge</div>
                                </div>
                            </div>
                            <div class="recommendation-item low">
                                <div class="rec-priority">LOW</div>
                                <div class="rec-content">
                                    <div class="rec-title">Monitor Small-Cap Liquidity</div>
                                    <div class="rec-description">2.7% in low-liquidity positions</div>
                                    <div class="rec-action">Monitor during market stress</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ESG View -->
            <div id="esgView" class="view">
                <div class="esg-header">
                    <h2>ESG & Sustainable Investing</h2>
                    <div class="esg-score-display">
                        <div class="esg-score">3.9</div>
                        <div class="esg-grade">B+</div>
                        <div class="esg-percentile">78th percentile</div>
                    </div>
                </div>

                <div class="esg-grid">
                    <!-- ESG Breakdown -->
                    <div class="esg-breakdown">
                        <h3>ESG Score Breakdown</h3>
                        <div class="esg-components">
                            <div class="esg-component">
                                <div class="component-header">
                                    <span class="component-icon">üåç</span>
                                    <span class="component-name">Environmental</span>
                                    <span class="component-score">3.8</span>
                                </div>
                                <div class="component-bar">
                                    <div class="bar-fill" style="width: 76%"></div>
                                </div>
                            </div>
                            <div class="esg-component">
                                <div class="component-header">
                                    <span class="component-icon">üë•</span>
                                    <span class="component-name">Social</span>
                                    <span class="component-score">4.1</span>
                                </div>
                                <div class="component-bar">
                                    <div class="bar-fill" style="width: 82%"></div>
                                </div>
                            </div>
                            <div class="esg-component">
                                <div class="component-header">
                                    <span class="component-icon">üèõÔ∏è</span>
                                    <span class="component-name">Governance</span>
                                    <span class="component-score">3.9</span>
                                </div>
                                <div class="component-bar">
                                    <div class="bar-fill" style="width: 78%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Environmental Metrics -->
                    <div class="environmental-metrics">
                        <h3>Environmental Impact</h3>
                        <div class="metric-grid">
                            <div class="env-metric">
                                <div class="metric-icon">üè≠</div>
                                <div class="metric-value">142.5</div>
                                <div class="metric-label">Carbon Intensity<br>(tCO2e/$M)</div>
                            </div>
                            <div class="env-metric">
                                <div class="metric-icon">‚ö°</div>
                                <div class="metric-value">18.4%</div>
                                <div class="metric-label">Renewable<br>Energy</div>
                            </div>
                            <div class="env-metric">
                                <div class="metric-icon">üíß</div>
                                <div class="metric-value">3.2</div>
                                <div class="metric-label">Water<br>Management</div>
                            </div>
                            <div class="env-metric">
                                <div class="metric-icon">‚ôªÔ∏è</div>
                                <div class="metric-value">4.1</div>
                                <div class="metric-label">Waste<br>Reduction</div>
                            </div>
                        </div>
                    </div>

                    <!-- SDG Alignment -->
                    <div class="sdg-alignment">
                        <h3>UN SDG Alignment</h3>
                        <div class="sdg-list">
                            <div class="sdg-item">
                                <div class="sdg-icon">üîã</div>
                                <div class="sdg-info">
                                    <div class="sdg-name">Clean Energy</div>
                                    <div class="sdg-allocation">18.4%</div>
                                </div>
                            </div>
                            <div class="sdg-item">
                                <div class="sdg-icon">üíº</div>
                                <div class="sdg-info">
                                    <div class="sdg-name">Decent Work</div>
                                    <div class="sdg-allocation">23.1%</div>
                                </div>
                            </div>
                            <div class="sdg-item">
                                <div class="sdg-icon">üî¨</div>
                                <div class="sdg-info">
                                    <div class="sdg-name">Innovation</div>
                                    <div class="sdg-allocation">31.2%</div>
                                </div>
                            </div>
                            <div class="sdg-item">
                                <div class="sdg-icon">üåç</div>
                                <div class="sdg-info">
                                    <div class="sdg-name">Climate Action</div>
                                    <div class="sdg-allocation">15.8%</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Impact Measurement -->
                    <div class="impact-measurement">
                        <h3>Impact Measurement</h3>
                        <div class="impact-chart">
                            <canvas id="impactChart"></canvas>
                        </div>
                        <div class="impact-stats">
                            <div class="impact-stat">
                                <div class="stat-value">67.2%</div>
                                <div class="stat-label">Positive Impact</div>
                            </div>
                            <div class="impact-stat">
                                <div class="stat-value">8.3%</div>
                                <div class="stat-label">Fossil Fuel Exposure</div>
                            </div>
                            <div class="impact-stat">
                                <div class="stat-value">5.1%</div>
                                <div class="stat-label">Impact Investing</div>
                            </div>
                        </div>
                    </div>

                    <!-- ESG Recommendations -->
                    <div class="esg-recommendations">
                        <h3>ESG Improvement Opportunities</h3>
                        <div class="esg-rec-list">
                            <div class="esg-rec-item">
                                <div class="rec-category env">Environmental</div>
                                <div class="rec-text">Increase renewable energy allocation to 25%</div>
                                <div class="rec-impact">Reduce carbon footprint by 12%</div>
                            </div>
                            <div class="esg-rec-item">
                                <div class="rec-category social">Social</div>
                                <div class="rec-text">Invest in companies with >45% board diversity</div>
                                <div class="rec-impact">Improve social score to 4.1</div>
                            </div>
                            <div class="esg-rec-item">
                                <div class="rec-category governance">Governance</div>
                                <div class="rec-text">Divest from poor tax transparency companies</div>
                                <div class="rec-impact">Increase governance score to 4.3</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings View -->
            <div id="settingsView" class="view">
                <div class="settings-header">
                    <h2>Account Settings</h2>
                </div>

                <div class="settings-content">
                    <div class="settings-section">
                        <h3>Investment Goals</h3>
                        <div class="form-group">
                            <label class="form-label">Primary Goal</label>
                            <select class="form-control">
                                <option value="long_term_growth" selected>Long-term Growth</option>
                                <option value="income">Income Generation</option>
                                <option value="preservation">Capital Preservation</option>
                                <option value="balanced">Balanced Growth</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Investment Timeline</label>
                            <select class="form-control">
                                <option value="5_years">5 Years</option>
                                <option value="10_years" selected>10 Years</option>
                                <option value="15_years">15 Years</option>
                                <option value="20_years">20+ Years</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Target Annual Return</label>
                            <input type="number" class="form-control" value="8.5" step="0.1" min="0" max="20">
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>Risk Preferences</h3>
                        <div class="form-group">
                            <label class="form-label">Risk Tolerance</label>
                            <select class="form-control">
                                <option value="conservative">Conservative</option>
                                <option value="moderate" selected>Moderate</option>
                                <option value="aggressive">Aggressive</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Auto-Rebalancing</label>
                            <select class="form-control">
                                <option value="monthly">Monthly</option>
                                <option value="quarterly" selected>Quarterly</option>
                                <option value="annually">Annually</option>
                                <option value="manual">Manual Only</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>Target Allocation</h3>
                        <div class="allocation-sliders">
                            <div class="slider-group">
                                <label>Stocks: <span id="stocksValue">40%</span></label>
                                <input type="range" id="stocksSlider" min="0" max="100" value="40" class="allocation-slider">
                            </div>
                            <div class="slider-group">
                                <label>ETFs: <span id="etfsValue">25%</span></label>
                                <input type="range" id="etfsSlider" min="0" max="100" value="25" class="allocation-slider">
                            </div>
                            <div class="slider-group">
                                <label>Bonds: <span id="bondsValue">15%</span></label>
                                <input type="range" id="bondsSlider" min="0" max="100" value="15" class="allocation-slider">
                            </div>
                            <div class="slider-group">
                                <label>Commodities: <span id="commoditiesValue">10%</span></label>
                                <input type="range" id="commoditiesSlider" min="0" max="100" value="10" class="allocation-slider">
                            </div>
                            <div class="slider-group">
                                <label>Precious Metals: <span id="preciousMetalsValue">5%</span></label>
                                <input type="range" id="preciousMetalsSlider" min="0" max="100" value="5" class="allocation-slider">
                            </div>
                            <div class="slider-group">
                                <label>Crypto: <span id="cryptoValue">5%</span></label>
                                <input type="range" id="cryptoSlider" min="0" max="100" value="5" class="allocation-slider">
                            </div>
                        </div>
                        <div class="allocation-total">
                            Total: <span id="allocationTotal">100%</span>
                        </div>
                    </div>

                    <div class="settings-actions">
                        <button class="btn btn--primary">Save Settings</button>
                        <button class="btn btn--outline">Reset to Defaults</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
    <script src="test-suite.js"></script>
    <script src="phase3-test-suite.js"></script>
    <script src="phase4-test-suite.js"></script>
    <script>
        // Immediate test script
        console.log('=== IMMEDIATE TEST: JavaScript is running ===');
        
        // Test if DOM elements exist
        setTimeout(() => {
            console.log('=== DOM TEST ===');
            const loginForm = document.getElementById('loginForm');
            const signInButton = document.querySelector('button[type="submit"]');
            console.log('Login form found:', !!loginForm);
            console.log('Sign in button found:', !!signInButton);
            
            if (signInButton) {
                console.log('Adding direct test click handler...');
                signInButton.addEventListener('click', function(e) {
                    console.log('=== BUTTON CLICKED - TEST HANDLER ===');
                    alert('Button click detected!');
                });
            }
        }, 500);
    </script>
</body>
</html>